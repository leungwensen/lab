/*! pastry - v0.3.20150303 */!function(a){"use strict";function b(a,b,c){for(var d in a)b.call(c,a[d],d,a)}if(a=a||{},!a.pastry){var c,d,e={},f=Array,g=Function,h=Object,i=String,j="prototype",k="undefined",l=f[j],m=g[j],n=i[j],o=function(){},p={}.toString,q=l.slice,r=function(a){return q.call(a,1)},s=function(a,b,c){return a.apply(b,r(c))},t=function(a,b){return p.call(b)==="[object "+a+"]"},u=e.isArrayLike=function(a){return"object"==typeof a&&isFinite(a.length)},v=e.isFunction=function(a){return t("Function",a)},w=e.isNumber=function(a){return t("Number",a)},x=e.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},y=e.isPlainObject=function(a){return t("Object",a)},z=e.toArray=function(a){return u(a)?q.call(a):[]};e.index=function(a){return function(b,c,d){var e,f=b.length>>>0;if(0===f)return-1;if(d?0>d&&(d=Math.max(0,b.length+d)):d=a?0:b.length,a){for(e=d;e<b.length;e++)if(b[e]===c)return e}else for(e=d;e>=0;e--)if(b[e]===c)return e;return-1}},e.indexOf=l.indexOf?function(a){return s(l.indexOf,a,arguments)}:e.index(!0),e.lastIndexOf=l.lastIndexOf?function(a){return s(l.lastIndexOf,a,arguments)}:e.index(),c=e.each=e.forEach=l.forEach?function(a,c,d){return u(a)?s(l.forEach,a,arguments):(y(a)&&b(a,c,d),a)}:function(a,c,d){if(u(a))for(var e=a.length,f=0;e>f;f++)f in a&&c.call(d,a[f],f,a);else y(a)&&b(a,c,d);return a},e.eachReverse=function(a,b,c){if(a)for(var d=a.length-1;d>-1;d-=1)b.call(c,a[d],d,a);return a},e.every=l.every?function(a){return s(l.every,a,arguments)}:function(a,b,c){var d;for(d=0;d<a.length;d++)if(!b.call(c,a[d],d,a))return!1;return!0},e.filter=l.filter?function(a){return s(l.filter,a,arguments)}:function(a,b,d){var e=[];return c(a,function(c,f){b.call(d,c,f,a)&&e.push(c)}),e},e.map=l.map?function(a){return s(l.map,a,arguments)}:function(a,b,d){var e=[];return c(a,function(c,f){e.push(b.call(d,c,f,a))}),e},e.some=l.some?function(a){return s(l.some,a,arguments)}:function(a,b,c){var d;for(d=0;d<a.length;d++)if(b.call(c,a[d],d,a))return!0;return!1},e.reduce=l.reduce?function(a){return s(l.reduce,a,arguments)}:function(a,b,c){var d,e;for(c&&(e=c),d=0;d<a.length;d++)e=e?b(e,a[d],d,a):a[d];return e},e.reduceRight=l.reduceRight?function(a){return s(l.reduceRight,a,arguments)}:function(a,b,c){var d,e;for(c&&(e=c),d=a.length-1;d>=0;d--)e=e?b(e,a[d],d,a):a[d];return e},e.trim=n.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s+|\s+$/g,"")},e.trimLeft=n.trimLeft?function(a){return a.trimLeft()}:function(a){return a.replace(/^\s+/g,"")},e.trimRight=n.trimRight?function(a){return a.trimRight()}:function(a){return a.replace(/\s+$/g,"")},e.lc=function(a){return(a+"").toLowerCase()},e.uc=function(a){return(a+"").toUpperCase()},e.hasSubString=function(a,b){return a.indexOf(b)>-1},e.capitalize=function(a){return a+="",a.charAt(0).toUpperCase()+a.substr(1)},c(["Array","Arguments","Boolean","Date","Error","RegExp","String"],function(a){e["is"+a]=function(b){return t(a,b)}}),f.isArray&&(e.isArray=f.isArray),e.isNaN=function(a){return w(a)&&a!==+a},e.isFinite=function(a){return w(a)&&isFinite(a)&&!isNaN(a)},e.isUndefined=function(a){return void 0===a},e.isNull=function(a){return null===a},e.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=new Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e},e.flatten=function(a){for(var b=[],c=0,d=a.length;d>c;++c)u(a[c])?b=b.concat(a[c]):b[b.length]=a[c];return b},e.merge=function(a){return c(r(arguments),function(b){if(b)for(var c in b)p.call(b[c])!==p.call(a[c])?a[c]=b[c]:y(b[c])?(a[c]=a[c]||{},e.merge(a[c],b[c])):a[c]=b[c]}),a},e.extend=function(a){return c(r(arguments),function(b){if(b)for(var c in b)a[c]=b[c]}),a},e.remove=function(a,b,c){var d,e=a.length;return w(b)?(d=a.slice((c||b)+1||e),a.length=0>b?e+b:b,a.push.apply(a,d)):a},e.keys=h.keys?function(a){return h.keys(a)}:function(a){var b=[];return v(a)?c(a,function(a,c){c!==j&&b.push(c)}):c(a,function(a,c){b.push(c)}),b},e.invert=function(a){var b={};return c(a,function(a,c){b[a]=c}),b},e.values=function(a){var b=[];return c(a,function(a){b.push(a)}),b},e.hasKey=function(a,b){return a.hasOwnProperty(b)},d=e.hasValue=function(a,b){return e.indexOf(e.values(a),b)>-1},e.uniq=function(a){var b=[];return c(a,function(a){d(b,a)||b.push(a)}),b},e.union=function(){var a=[],b=z(arguments);return c(b,function(b){a.concat(b)}),e.uniq(a)},e.difference=function(a){var b=e.flatten(r(arguments),!0,!0,[]);return e.filter(a,function(a){return!d(b,a)})},e.intersect=function(a,b){var e=[];return c(a,function(a){d(b,a)&&e.push(a)}),e},e.destroy=function(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b];a.prototype=a.__proto__=null,a=null},e.clone=function(a){return x(a)?u(a)?z(a):e.extend({},a):a},e.bind=m.bind?function(a){return s(m.bind,a,arguments)}:function(b,c){if(v(c)&&v(b)){var d=z(arguments).slice(2),f=function(){},g=function(){return b.apply(this instanceof f&&c?this:c||a,d.concat(arguments))};return f[e]=b[e],g[e]=new f,g}},c(["info","log","warn"],function(a){e[a.toUpperCase()]=typeof console===k?o:e.bind(console[a],console)}),e.ERROR=function(a){throw e.WARN(a),new Error(a)},e.getAny=function(a){var b,c;for(b=0;b<a.length;b++)try{c=a[b]();break}catch(d){}return c},e.uuid=function(a){return a=a||"",a+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8,d=c.toString(16);return d})},e.mixin=function(a,b){c(a,function(a,c){e[c]&&!b?e.ERROR("pastry."+c+" already exists"):e[c]=a})},e.setGLOBAL=function(b,c){typeof exports!==k&&(exports[b]=c),a[b]=c},c(["P","pastry","PASTRY"],function(a){e.setGLOBAL(a,e)}),typeof exports!==k&&typeof module!==k&&module.exports&&(module.exports=e)}}(this),function(a){"use strict";var b=a.pastry,c=function(a){a=a||this;var c=a._events={};return a.on=function(b,d,e){var f=c[b]||(c[b]=[]);return f.push({callback:d,context:e}),a},a.off=function(b,d){b||(c={});var e=c[b]||[],f=e.length;if(d)for(;f>0;)f--,e[f].callback===d&&e.splice(f,1);else e=[];return a},a.emit=function(){var d=b.toArray(arguments),e=c[d.shift()]||[];return b.each(e,function(a){a.callback||(b.LOG(a,e),b.ERROR("event callback is not defined")),a.callback.apply(a.context,d)}),a},a.trigger=a.emit,a};c(b),b.event=c}(this);var define;!function(a,b){"use strict";if(!define){var c,d=a.pastry,e=d.event,f=d.each,g=function(a){var b=this;return b.initialise(a),b},h=g._data={},i=h.moduleByUri={},j=h.exportsByUri={},k=h.executedByUri={},l=h.queueByUri={};e(g),g.prototype={initialise:function(a){var b,c,e,f=this;return d.extend(f,a),g.emit("module-initialised",f),(c=f.uri)&&(i[c]||(i[c]=f),l[c]||(l[c]=f)),(b=f.id)&&(i[b]||(i[b]=f)),(e=f.relativeUri)&&(i[e]||(i[e]=f),l[e]||(l[f.relativeUri]=f)),f},processDeps:function(){var a=this;return g.emit("module-depsProcessed",a),a},execute:function(){var a=this,c=[];if("exports"in a)return delete l[a.uri],delete l[a.relativeUri],a;if(d.every(a.deps,function(a){return!!k[a]})){var e=a.factory,h=a.uri,i=a.id,m=a.relativeUri;f(a.deps,function(a){c.push(j[a])}),a.exports=j[h]=j[i]=j[m]=d.isFunction(e)?e.apply(b,c):e,k[h]=k[i]=k[m]=!0,delete l[h],g.emit("module-executed",a)}return a}},g.on("module-executed",function(){f(l,function(a){a instanceof g&&a.execute()})}),define=a.define=g.define=function(){var a,c=d.toArray(arguments),e=d.isString(c[0])?c.shift():b,f=c.length>1?c.shift():[],h=c[0],i={id:e,uri:e,deps:f,factory:h};g.emit("module-metaGot",i),a=new g(i).processDeps().execute(),g.emit("module-defined",a)},define.amd={},c=define,define("pastry/Module",function(){return g}),define("pastry/pastry",function(){return d}),define("pastry/event",function(){return d.event}),d.setGLOBAL("require",c)}}(this),define("pastry/module/path",["pastry/pastry","pastry/Module"],function(a,b){"use strict";function c(a){return a.match(k)[0]}function d(a){for(a=a.replace(l,"/"),a=a.replace(o,"$1/");a.match(m);)a=a.replace(m,"/");return a}function e(a){var b=a.length-1,c=a.charCodeAt(b);return 35===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||47===c?a:a+".js"}function f(b){var c=r.alias;return c&&a.isString(c[b])?c[b]:b}function g(b){var c,d=r.paths;return d&&(c=b.match(p))&&a.isString(d[c[1]])&&(b=d[c[1]]+c[2]),b}function h(a,b){var e,f=a.charCodeAt(0);if(j.test(a))e=a;else if(46===f)e=(b?c(b):r.cwd)+a;else if(47===f){var g=r.cwd.match(q);e=g?g[0]+a.substring(1):a}else e=r.base+a;return 0===e.indexOf("//")&&(e=t.protocol+e),d(e)}function i(a,b){if(!a)return"";a=f(a),a=g(a),a=f(a),a=e(a),a=f(a);var c=h(a,b);return c=f(c)}var j=/^\/\/.|:\//,k=/[^?#]*\//,l=/\/\.\//g,m=/\/[^/]+\/\.\.\//,n=/^(about|blob):/,o=/([^:/])\/+\//g,p=/^([^/:]+)(\/.+)$/,q=/^.*?\/\/.*?\//,r=b._data,s=document,t=location,u=t.href,v=s.scripts,w=s.getElementById("moduleLoader")||v[v.length-1],x=w.hasAttribute?w.src:w.getAttribute("src",4);return r.cwd=!u||n.test(u)?"":c(u),r.path=x,r.dir=r.base=c(x||r.cwd),{id2Uri:i}}),define("pastry/module/request",["pastry/pastry","pastry/Module"],function(a,b){"use strict";function c(c,d,e){function f(b){c.onload=c.onerror=c.onreadystatechange=null,c=null,a.isFunction(d)&&d(b)}var g="onload"in c;g?(c.onload=f,c.onerror=function(){b.emit("error",{uri:e,node:c}),f(!0)}):c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&f()}}function d(d,h,i,j){var k=e.createElement("script");if(i){var l=a.isFunction(i)?i(d):i;l&&(k.charset=l)}var m=a.isFunction(j)?j(d):j;m!==!1&&(k.crossorigin=m),c(k,h,d),k.async=!0,k.src=d,b.currentlyAddingScript=k,g?f.insertBefore(k,g):f.appendChild(k),b.currentlyAddingScript=null}var e=document,f=e.head||e.getElementsByTagName("head")[0]||e.documentElement,g=f.getElementsByTagName("base")[0];return d}),define("pastry/module/loader",["pastry/pastry","pastry/Module","pastry/module/path","pastry/module/request"],function(a,b,c,d){"use strict";function e(){if(b.currentlyAddingScript)return b.currentlyAddingScript.src;if(k.currentScript)return k.currentScript.src;var a;try{throw new Error}catch(c){a=c.stack,!a&&l.opera&&(a=(String(c).match(/of linked script \S+/g)||[]).join(" "))}if(a)return a=a.split(/[@ ]/g).pop(),a="("===a[0]?a.slice(1,-1):a,a.replace(/(:\d+)?:\d+$/i,"");if(f&&"interactive"===f.readyState)return f.src;for(var d,e=k.getElementsByTagName("script"),g=0;d=e[g++];)if("interactive"===d.readyState)return f=d,d.src}var f,g=b._data,h=g.moduleByUri,i=g.executedByUri,j=g.loadingByUri={},k=document,l=window,m=c.id2Uri,n=a.each;b.resolve=m,b.request=d,b.on("module-metaGot",function(b){var c=e();b.uri=c?c:g.cwd,(""===c||a.isString(c)&&c===g.cwd)&&(b.id||(b.uri=g.cwd+("#"+a.uuid())))}).on("module-initialised",function(b){var c,d;a.isString(b.uri)&&b.uri.indexOf("/")>-1||(b.uri=m(b.id)),c=b.uri,(d=b.id)&&(b.relativeUri=c.indexOf(d+".")>-1?c:m("./"+b.id,b.uri))}).on("module-depsProcessed",function(a){n(a.deps,function(b,c){var e;e=h[b]?b:m(b,a.relativeUri||a.uri),a.deps[c]=e,h[e]||j[e]||i[e]||(d(e),j[e]=!0)})})}),define("all-amd-loader-modules",["pastry/module/loader"],function(){});