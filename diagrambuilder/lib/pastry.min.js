(function(GLOBAL){"use strict";GLOBAL=GLOBAL||{};var P={},A=Array,F=Function,O=Object,S=String,PS="prototype",U="undefined",AP=A[PS],FP=F[PS],OP=O[PS],SP=S[PS],toStr={}.toString,slice=AP.slice,noop=function(){};P.VERSION="0.2.0";P.index=function(up){return function(arr,searchElement,fromIndex){var i,len=arr.length>>>0;if(len===0){return-1}if(!fromIndex){fromIndex=0}else if(fromIndex<0){fromIndex=Math.max(0,arr.length+fromIndex)}if(up){for(i=fromIndex;i<arr.length;i++){if(arr[i]===searchElement){return i}}}else{for(i=fromIndex;i>=0;i--){if(arr[i]===searchElement){return i}}}return-1}};P.indexOf=AP.indexOf?function(arr,searchElement,fromIndex){return arr.indexOf(searchElement,fromIndex)}:P.index(true);P.lastIndexOf=AP.lastIndexOf?function(arr,searchElement,fromIndex){return arr.lastIndexOf(searchElement,fromIndex)}:P.index();P.each=P.forEach=OP.forEach?function(obj,callback,thisObj){obj.forEach(callback,thisObj)}:function(obj,callback,thisObj){for(var key in obj){callback.call(thisObj,obj[key],key,obj)}};P.every=AP.every?function(arr,callback,thisObj){return arr.every(callback,thisObj)}:function(arr,callback,thisObj){var i;for(i=0;i<arr.length;i++){if(!callback.call(thisObj,arr[i],i,arr)){return false}}return true};P.filter=AP.filter?function(arr,callback,thisObj){return arr.filter(callback,thisObj)}:function(arr,callback,thisObj){var res=[];P.each(arr,function(element,key){if(callback.call(thisObj,element,key,arr)){res.push(element)}});return res};P.map=AP.map?function(arr,callback,thisObj){return arr.map(callback,thisObj)}:function(arr,callback,thisObj){var res=[];P.each(arr,function(element,key){res.push(callback.call(thisObj,element,key,arr))});return res};P.some=AP.some?function(arr,callback,thisObj){return arr.some(callback,thisObj)}:function(arr,callback,thisObj){var i;for(i=0;i<arr.length;i++){if(callback.call(thisObj,arr[i],i,arr)){return true}}return false};P.reduce=AP.reduce?function(arr,callback,thisObj){return thisObj?arr.reduce(callback,thisObj):arr.reduce(callback)}:function(arr,callback,thisObj){var i,value;if(thisObj){value=thisObj}for(i=0;i<arr.length;i++){if(value){value=callback(value,arr[i],i,arr)}else{value=arr[i]}}return value};P.reduceRight=AP.reduceRight?function(arr,callback,thisObj){return thisObj?arr.reduceRight(callback,thisObj):arr.reduceRight(callback)}:function(arr,callback,thisObj){var i,value;if(thisObj){value=thisObj}for(i=arr.length-1;i>=0;i--){if(value){value=callback(value,arr[i],i,arr)}else{value=arr[i]}}return value};P.trim=SP.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s+|\s+$/g,"")};P.trimLeft=SP.trimLeft?function(str){return str.trimLeft()}:function(str){return str.replace(/^\s+/g,"")};P.trimRight=SP.trimRight?function(str){return str.trimRight()}:function(str){return str.replace(/\s+$/g,"")};P.lc=function(str){return str.toString().toLowerCase()};P.uc=function(str){return str.toString().toUpperCase()};P.hasSubString=function(str,subStr){return str.indexOf(subStr)>-1};P.each(["Array","Arguments","Boolean","Date","Error","Function","Number","RegExp","String"],function(type){P["is"+type]=function(obj){return toStr.call(obj)==="[object "+type+"]"}});P.isArray=A.isArray?A.isArray:P.isArray;P.isObject=function(obj){var type=typeof obj;return type==="object"&&!!obj};P.isNaN=function(obj){return P.isNumber(obj)&&obj!==+obj};P.isFinite=function(obj){return P.isNumber(obj)&&isFinite(obj)&&!isNaN(obj)};P.isUndefined=function(obj){return obj===undefined};P.isNull=function(obj){return obj===null};P.toArray=function(obj){return slice.call(obj)};P.merge=function(dest){if(P.isObject(dest)){P.each(P.toArray(arguments).slice(1),function(source){if(source){for(var prop in source){if(P.isObject(source[prop])){dest[prop]=dest[prop]||{};P.merge(dest[prop],source[prop])}else{dest[prop]=source[prop]}}}})}return dest};P.extend=function(dest){if(P.isObject(dest)){P.each(P.toArray(arguments).slice(1),function(source){if(source){for(var prop in source){dest[prop]=source[prop]}}})}return dest};P.remove=function(arr,fromIndex,toIndex){var rest,len=arr.length;if(!P.isNumber(fromIndex)){return arr}rest=arr.slice((toIndex||fromIndex)+1||len);arr.length=fromIndex<0?len+fromIndex:fromIndex;return arr.push.apply(arr,rest)};P.keys=O.keys?function(obj){return O.keys(obj)}:function(obj){var result=[];if(P.isFunction(obj)){P.each(obj,function(value,key){if(key!==P){result.push(key)}})}else{P.each(obj,function(value,key){result.push(key)})}return result};P.values=function(obj){var values=[];P.each(obj,function(value){values.push(value)});return values};P.hasKey=function(obj,key){return obj.hasOwnProperty(key)};P.hasValue=function(obj,value){return P.indexOf(P.values(obj),value)>-1};P.uniq=function(arr){var resultArr=[];P.each(arr,function(element){if(!P.hasValue(resultArr,element)){resultArr.push(element)}});return resultArr};P.union=function(){var resultArr=[],sourceArrs=P.toArray(arguments).slice();P.each(sourceArrs,function(arr){resultArr.concat(arr)});return P.uniq(resultArr)};P.bind=FP.bind?function(func,oThis){return func.bind(oThis,P.toArray(arguments).slice(2))}:function(func,oThis){if(P.isFunction(oThis)&&P.isFunction(func)){var aArgs=P.toArray(arguments).slice(2),FNOP=function(){},fBound=function(){return func.apply(this instanceof FNOP&&oThis?this:oThis||GLOBAL,aArgs.concat(arguments))};FNOP[P]=func[P];fBound[P]=new FNOP;return fBound}};P.each(["info","log","warn"],function(type){P[type.toUpperCase()]=typeof console===U?noop:console[type]});P.ERROR=function(err){P.warn(P.toArray(arguments));throw new Error(err)};P.getAny=function(callbackList){var i,returnValue;for(i=0;i<callbackList.length;i++){try{returnValue=callbackList[i]();break}catch(e){}}return returnValue};P.uuid=function(prefix){prefix=prefix||"";return prefix+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8,result=v.toString(16);return result})};P.mixin=function(obj,override){P.each(obj,function(value,key){if(P[key]&&!override){P.ERROR("P."+key+" already exists")}else{P[key]=value}})};P.setGLOBAL=function(key,value){if(typeof exports!==U){exports[key]=value}GLOBAL[key]=value};P.each(["P","pastry","PASTRY"],function(alias){P.setGLOBAL(alias,P)});if(typeof exports!==U){if(typeof module!==U&&module.exports){module.exports=P}}P.getGLOBAL=function(key){return GLOBAL[key]}})(this);